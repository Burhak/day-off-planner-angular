<app-navigation></app-navigation>
<app-error></app-error>
<div class="pageContent">
  <div class="addUser-form">
      <h2>Add user</h2>
      <form [formGroup]="form" #formDirective="ngForm" (submit)="createNewUser($event, formDirective)">
        <mat-form-field class="addUser-element">
          <input matInput
                 placeholder="Firstname"
                 id="firstname" formControlName="firstname">
          <mat-error *ngIf="form.hasError('required', ['firstname'])">
            Firstname is <strong>required</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="addUser-element">
          <input matInput
                 placeholder="Lastname"
                 id="lastname" formControlName="lastname">
          <mat-error *ngIf="form.hasError('required', ['lastname'])">
            Lastname is <strong>required</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="addUser-element">
          <input matInput
                 placeholder="Job title"
                 id="jobdescription" formControlName="jobdescription">
          <mat-error *ngIf="form.hasError('required', ['jobdescription'])">
            Job description is <strong>required</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="addUser-element">
          <input matInput
                 placeholder="Email"
                 id="email" formControlName="email">
          <mat-hint></mat-hint>
          <mat-error *ngIf="form.hasError('required', ['email'])">
            Email is <strong>required</strong>
          </mat-error>
          <mat-error *ngIf="form.hasError('email', ['email'])">
            Please enter a valid email address
          </mat-error>
        </mat-form-field>

        <mat-form-field class="addUser-element">
          <input matInput
                 placeholder="Phone"
                 id="phone">
          <mat-hint></mat-hint>
        </mat-form-field>

        <mat-form-field>
          <mat-label>Supervisor</mat-label>
          <mat-select [formControl]="selectControl" id="supervisor">
            <mat-option *ngFor="let user of posibleUserSupervisors" [value]="user.id">
              {{user.firstName}} {{user.lastName}}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <br>

        <mat-checkbox id="admin" name="admin" class="example-margin">Admin privileges</mat-checkbox>

        <div class="text-danger text-center">
          {{errorMsg}}
        </div>

        <div class="buttonGroup">
          <button disabled="{{buttonDisabled}}" mat-raised-button type="submit" id="submitBtn" class="submitBtn">Confirm</button>
          <button mat-raised-button id="backBtn" class="backBtn" routerLink="/admin/userList">Back</button>
        </div>
      </form>

  </div>

  <div class="text-center">
    <h6 class="message" [className]="isUserAdded ? 'messageVisible' : 'messageHidden'"> <mat-icon>check_circle_outline</mat-icon><span class="messageText">New user has been added successfully!</span></h6>
  </div>
</div>
