<app-navigation></app-navigation>
<app-error></app-error>
<div *ngIf="isLoaded" class="pageContent">
<div *ngIf="!editingUser && !editingLimits" class="userProfile">
  <div class="userProfileCard">
    <div class="title">
      <h1>User profile</h1>
    </div>
    <div class="userProfileInfo">
      <div class="mainUserInfo">
        <img src="../../../assets/images/userIcon_dark.png">
        <h2><strong>{{user?.firstName}} {{user?.lastName}}</strong></h2>
        <h3>{{user?.jobDescription}}</h3>
      </div>
      <div class="otherUserInfo">
        <h3><strong>Email: </strong> {{user?.email}}</h3>
        <h3><strong>Phone number: </strong>{{user?.phone}}</h3>
      </div>
      <div class="userRoles">
        <h3>
          <strong>Supervisor: </strong>
          <span *ngIf="userSupervisor; else noSupervisor">
            {{userSupervisor?.firstName}} {{userSupervisor?.lastName}}
          </span>
          <ng-template #noSupervisor>
            none
          </ng-template>
        </h3>
        <h3>
          <strong>Approvers: </strong>
          <span *ngIf="userApprovers.length!=0; else noApprovers">
            <span *ngFor="let userApprover of userApprovers;let i = index"><span *ngIf="i!=0">, </span>{{userApprover?.firstName}} {{userApprover?.lastName}}</span>
          </span>
          <ng-template #noApprovers>
            none
          </ng-template>
        </h3>
      </div>
    </div>
  </div>
  <div class="admin-options" *ngIf="userInfoService?.hasAdminPrivileges">
    <button mat-menu-item (click)="openEditUser()">Edit</button>
    <button mat-menu-item (click)="openLimitsUser()">Limits</button>
    <button mat-menu-item class="deleteBtn" (click)="openDialogDeleteUser(user)" disabled="{{deleteBtnDisabled}}">Delete</button>
  </div>
</div>

<app-update-user *ngIf="editingUser"  (userUpdatedEvent)="receiveMessage($event)" [user]="user"></app-update-user>
<app-individual-limits *ngIf="editingLimits" [user]="user"></app-individual-limits>
</div>

